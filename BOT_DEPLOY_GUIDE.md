# Деплой Telegram бота на Railway

## Шаг 1: Подготовка

1. **Убедитесь, что основной сайт задеплоен на Vercel**
2. **Получите URL вашего сайта** (например: `https://your-site.vercel.app`)

## Шаг 2: Установка Railway CLI

```bash
npm install -g @railway/cli
```

## Шаг 3: Вход в Railway

```bash
railway login
```

## Шаг 4: Деплой бота

1. **Перейдите в папку бота**:
   ```bash
   cd telegram_bot
   ```

2. **Инициализируйте проект**:
   ```bash
   railway init
   ```

3. **Деплойте**:
   ```bash
   railway up
   ```

## Шаг 5: Настройка переменных окружения

В Railway dashboard добавьте:

### Обязательные переменные:
- `BOT_TOKEN` = ваш_токен_бота_от_BotFather
- `WEBHOOK_URL` = https://ваш-сайт.vercel.app/webhook

### Дополнительные переменные:
- `PORT` = 8000
- `ENVIRONMENT` = production

## Шаг 6: Установка вебхука

После деплоя выполните в браузере:

```
https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook?url=https://ваш-сайт.vercel.app/webhook
```

## Шаг 7: Проверка работы

1. **Отправьте `/start` в бот**
2. **Проверьте логи в Railway dashboard**
3. **Убедитесь, что бот отвечает**

## Альтернативный способ - Railway Dashboard

1. **Перейдите на** https://railway.app
2. **Создайте новый проект**
3. **Подключите GitHub репозиторий**
4. **Выберите папку `telegram_bot`**
5. **Настройте переменные окружения**
6. **Деплойте**

## Структура файлов бота

```
telegram_bot/
├── bot.py              # Основной файл бота
├── webhook_bot.py      # Версия с вебхуком
├── config.py           # Конфигурация
├── requirements.txt    # Зависимости
├── vercel.json         # Конфигурация Vercel
├── railway.json        # Конфигурация Railway
├── Procfile           # Для Railway
└── runtime.txt        # Версия Python
```

## Проверка работоспособности

### Тест API:
```bash
curl https://ваш-сайт.vercel.app/api/health
```

### Тест бота:
1. Найдите бота в Telegram
2. Отправьте `/start`
3. Проверьте ответ

## Возможные проблемы

### Бот не отвечает:
- Проверьте переменные окружения
- Убедитесь, что вебхук установлен
- Проверьте логи в Railway

### Ошибки деплоя:
- Убедитесь, что все файлы в папке
- Проверьте requirements.txt
- Проверьте версию Python

### Проблемы с вебхуком:
- Убедитесь, что URL правильный
- Проверьте, что сайт работает
- Проверьте SSL сертификат

## Полная команда деплоя

```bash
# В папке telegram_bot
railway login
railway init
railway up
```

## Настройка автоматического деплоя

1. **Подключите GitHub к Railway**
2. **Настройте автодеплой**
3. **При каждом push в main будет автоматический деплой**

## Мониторинг

- **Railway dashboard** - логи и статус
- **Telegram** - тестирование бота
- **Vercel dashboard** - статус сайта

## Готово!

После выполнения всех шагов:
- ✅ Сайт работает на Vercel
- ✅ Бот работает на Railway
- ✅ Вебхук настроен
- ✅ Все функции доступны 