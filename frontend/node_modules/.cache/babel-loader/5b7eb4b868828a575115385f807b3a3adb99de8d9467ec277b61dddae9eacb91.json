{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\ProThemesRU1\\\\frontend\\\\src\\\\components\\\\Editor.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport Header from './Header';\nimport Sidebar from './Sidebar';\nimport Canvas from './Canvas';\nimport PropertiesPanel from './PropertiesPanel';\nimport AIColorPaletteGenerator from './AIColorPaletteGenerator';\nimport LayersPanel from './LayersPanel';\nimport { generateUniqueId } from '../utils/idGenerator';\nimport JSZip from 'jszip';\nimport { saveAs } from 'file-saver';\nimport logo from '../assets/logo.png';\nimport { generateHtmlCss } from '../utils/exportUtils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MAX_HISTORY_SIZE = 50;\nfunction Editor() {\n  _s();\n  const [elements, setElements] = useState([]);\n  const [selectedElementIds, setSelectedElementIds] = useState([]);\n  const canvasRef = useRef(null);\n  const [history, setHistory] = useState([[]]);\n  const [historyIndex, setHistoryIndex] = useState(0);\n  useEffect(() => {\n    if (history[historyIndex] === elements) {\n      return;\n    }\n    const newHistory = history.slice(0, historyIndex + 1);\n    newHistory.push(elements);\n    if (newHistory.length > MAX_HISTORY_SIZE) {\n      newHistory.shift();\n    }\n    setHistory(newHistory);\n    setHistoryIndex(newHistory.length - 1);\n  }, [elements, history, historyIndex]);\n  useEffect(() => {\n    try {\n      const savedElements = localStorage.getItem('canvasElements');\n      if (savedElements) {\n        const loadedElements = JSON.parse(savedElements);\n        setElements(loadedElements);\n        setHistory([loadedElements]);\n        setHistoryIndex(0);\n      }\n    } catch (e) {\n      console.error(\"Failed to load elements from localStorage\", e);\n    }\n  }, []);\n  const selectedElement = selectedElementIds.length > 0 ? elements.find(el => el.id === selectedElementIds[0]) : null;\n  const addElement = useCallback((type, x, y) => {\n    const newElement = {\n      id: generateUniqueId(),\n      type,\n      x,\n      y,\n      width: 150,\n      height: 50,\n      props: {\n        name: `${type.charAt(0).toUpperCase() + type.slice(1)} ${elements.length + 1}`\n      }\n    };\n    switch (type) {\n      case 'text':\n        newElement.props = {\n          ...newElement.props,\n          content: 'Новый текст',\n          fontSize: '16px',\n          color: '#000000'\n        };\n        newElement.width = 200;\n        newElement.height = 40;\n        break;\n      case 'image':\n        newElement.props = {\n          ...newElement.props,\n          src: 'https://via.placeholder.com/150',\n          alt: 'Изображение'\n        };\n        newElement.width = 150;\n        newElement.height = 150;\n        break;\n      case 'button':\n        newElement.props = {\n          ...newElement.props,\n          label: 'Кнопка',\n          bgColor: '#007bff',\n          textColor: '#ffffff'\n        };\n        newElement.width = 120;\n        newElement.height = 40;\n        break;\n      case 'shape':\n        newElement.props = {\n          ...newElement.props,\n          bgColor: '#ffc107',\n          borderRadius: '0'\n        };\n        newElement.width = 100;\n        newElement.height = 100;\n        break;\n      default:\n        break;\n    }\n    setElements(prevElements => [...prevElements, newElement]);\n    setSelectedElementIds([newElement.id]);\n  }, [elements.length]);\n  const updateElement = useCallback((id, updates) => {\n    setElements(prevElements => prevElements.map(el => el.id === id ? {\n      ...el,\n      ...updates\n    } : el));\n  }, []);\n  const updateMultipleElements = useCallback((ids, updatesMap) => {\n    setElements(prevElements => prevElements.map(el => {\n      if (ids.includes(el.id)) {\n        const updates = updatesMap[el.id];\n        return {\n          ...el,\n          ...updates\n        };\n      }\n      return el;\n    }));\n  }, []);\n  const updateElementProps = useCallback((id, newProps) => {\n    setElements(prevElements => prevElements.map(el => el.id === id ? {\n      ...el,\n      props: {\n        ...el.props,\n        ...newProps\n      }\n    } : el));\n  }, []);\n  const deleteElement = useCallback(id => {\n    setElements(prevElements => prevElements.filter(el => el.id !== id));\n    setSelectedElementIds(prevIds => prevIds.filter(prevId => prevId !== id));\n  }, []);\n  const deleteSelectedElements = useCallback(() => {\n    if (selectedElementIds.length > 0 && window.confirm(`Вы уверены, что хотите удалить выбранные элементы (${selectedElementIds.length})?`)) {\n      setElements(prevElements => prevElements.filter(el => !selectedElementIds.includes(el.id)));\n      setSelectedElementIds([]);\n    }\n  }, [selectedElementIds]);\n  const saveCanvas = useCallback(() => {\n    try {\n      localStorage.setItem('canvasElements', JSON.stringify(elements));\n      alert('Проект сохранен!');\n    } catch (e) {\n      console.error(\"Failed to save elements to localStorage\", e);\n      alert('Ошибка при сохранении проекта!');\n    }\n  }, [elements]);\n  const clearCanvas = useCallback(() => {\n    if (window.confirm('Вы уверены, что хотите очистить канвас? Все несохраненные изменения будут потеряны!')) {\n      setElements([]);\n      setSelectedElementIds([]);\n      localStorage.removeItem('canvasElements');\n      alert('Канвас очищен!');\n    }\n  }, []);\n  const exportToHtmlCss = useCallback(() => {\n    const {\n      htmlContent,\n      cssContent\n    } = generateHtmlCss(elements);\n    const zip = new JSZip();\n    zip.file(\"index.html\", htmlContent);\n    zip.file(\"style.css\", cssContent);\n    zip.generateAsync({\n      type: \"blob\"\n    }).then(function (content) {\n      saveAs(content, \"my_design.zip\");\n      alert('Дизайн экспортирован в ZIP-архив!');\n    }).catch(e => {\n      console.error(\"Error exporting to ZIP:\", e);\n      alert('Ошибка при экспорте дизайна!');\n    });\n  }, [elements]);\n  const undo = useCallback(() => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      setElements(history[newIndex]);\n      setSelectedElementIds([]);\n    }\n  }, [history, historyIndex]);\n  const redo = useCallback(() => {\n    if (historyIndex < history.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      setElements(history[newIndex]);\n      setSelectedElementIds([]);\n    }\n  }, [history, historyIndex]);\n  const onMoveLayer = useCallback((fromIndex, toIndex) => {\n    setElements(prevElements => {\n      const newElements = [...prevElements];\n      const [movedElement] = newElements.splice(fromIndex, 1);\n      newElements.splice(toIndex, 0, movedElement);\n      return newElements;\n    });\n  }, []);\n\n  // --- Горячие клавиши ---\n  const canUndo = historyIndex > 0;\n  const canRedo = historyIndex < history.length - 1;\n  const handleKeyDown = useCallback(e => {\n    // Не срабатывает, если фокус в input/textarea\n    if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {\n      return;\n    }\n    const isCtrlOrCmd = e.metaKey || e.ctrlKey;\n    // Undo: Ctrl+Z / Cmd+Z\n    if (isCtrlOrCmd && e.key === 'z' && !e.shiftKey) {\n      e.preventDefault();\n      if (canUndo) undo();\n    }\n    // Redo: Ctrl+Shift+Z / Cmd+Shift+Z\n    else if (isCtrlOrCmd && e.key.toLowerCase() === 'z' && e.shiftKey) {\n      e.preventDefault();\n      if (canRedo) redo();\n    }\n    // Redo alternative: Ctrl+Y / Cmd+Y\n    else if (isCtrlOrCmd && e.key.toLowerCase() === 'y') {\n      e.preventDefault();\n      if (canRedo) redo();\n    }\n    // Delete/Backspace\n    else if (e.key === 'Delete' || e.key === 'Backspace') {\n      if (selectedElementIds.length > 0) {\n        e.preventDefault();\n        deleteSelectedElements();\n      }\n    }\n    // Save: Ctrl+S / Cmd+S\n    else if (isCtrlOrCmd && e.key.toLowerCase() === 's') {\n      e.preventDefault();\n      saveCanvas();\n    }\n  }, [canUndo, undo, canRedo, redo, selectedElementIds, deleteSelectedElements, saveCanvas]);\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleKeyDown]);\n\n  // НОВАЯ ФУНКЦИЯ: Выравнивание элементов\n  const alignElements = useCallback(alignment => {\n    if (selectedElementIds.length < 2) return; // Для выравнивания нужно хотя бы 2 элемента\n\n    const selected = elements.filter(el => selectedElementIds.includes(el.id));\n\n    // Находим ограничивающую рамку для всех выбранных элементов\n    let minX = Infinity,\n      minY = Infinity;\n    let maxX = -Infinity,\n      maxY = -Infinity;\n    selected.forEach(el => {\n      minX = Math.min(minX, el.x);\n      minY = Math.min(minY, el.y);\n      maxX = Math.max(maxX, el.x + el.width);\n      maxY = Math.max(maxY, el.y + el.height);\n    });\n    const boundingBoxWidth = maxX - minX;\n    const boundingBoxHeight = maxY - minY;\n    const boundingBoxCenterX = minX + boundingBoxWidth / 2;\n    const boundingBoxCenterY = minY + boundingBoxHeight / 2;\n    setElements(prevElements => {\n      return prevElements.map(el => {\n        if (selectedElementIds.includes(el.id)) {\n          let newX = el.x;\n          let newY = el.y;\n          switch (alignment) {\n            case 'left':\n              newX = minX;\n              break;\n            case 'center-h':\n              newX = boundingBoxCenterX - el.width / 2;\n              break;\n            case 'right':\n              newX = maxX - el.width;\n              break;\n            case 'top':\n              newY = minY;\n              break;\n            case 'center-v':\n              newY = boundingBoxCenterY - el.height / 2;\n              break;\n            case 'bottom':\n              newY = maxY - el.height;\n              break;\n            default:\n              break;\n          }\n          return {\n            ...el,\n            x: newX,\n            y: newY\n          };\n        }\n        return el;\n      });\n    });\n  }, [elements, selectedElementIds]);\n\n  // НОВАЯ ФУНКЦИЯ: Распределение элементов\n  const distributeElements = useCallback(axis => {\n    if (selectedElementIds.length < 3) return; // Для распределения нужно хотя бы 3 элемента\n\n    const selected = elements.filter(el => selectedElementIds.includes(el.id)).sort((a, b) => axis === 'horizontal' ? a.x - b.x : a.y - b.y); // Сортируем по оси\n\n    if (selected.length < 2) return; // На всякий случай, если после фильтрации осталось мало элементов\n\n    // Находим крайние точки для распределения\n    const firstElement = selected[0];\n    const lastElement = selected[selected.length - 1];\n    setElements(prevElements => {\n      const newElements = [...prevElements];\n      const updatesMap = {};\n      if (axis === 'horizontal') {\n        const startX = firstElement.x;\n        const endX = lastElement.x + lastElement.width;\n        const totalWidth = endX - startX;\n        let totalElementsWidth = 0;\n        selected.forEach(el => totalElementsWidth += el.width);\n        const availableSpace = totalWidth - totalElementsWidth;\n        const spacing = availableSpace / (selected.length - 1);\n        let currentX = startX;\n        selected.forEach((el, index) => {\n          if (index === 0) {\n            updatesMap[el.id] = {\n              x: currentX\n            };\n          } else {\n            currentX += selected[index - 1].width + spacing;\n            updatesMap[el.id] = {\n              x: currentX\n            };\n          }\n        });\n      } else {\n        // vertical\n        const startY = firstElement.y;\n        const endY = lastElement.y + lastElement.height;\n        const totalHeight = endY - startY;\n        let totalElementsHeight = 0;\n        selected.forEach(el => totalElementsHeight += el.height);\n        const availableSpace = totalHeight - totalElementsHeight;\n        const spacing = availableSpace / (selected.length - 1);\n        let currentY = startY;\n        selected.forEach((el, index) => {\n          if (index === 0) {\n            updatesMap[el.id] = {\n              y: currentY\n            };\n          } else {\n            currentY += selected[index - 1].height + spacing;\n            updatesMap[el.id] = {\n              y: currentY\n            };\n          }\n        });\n      }\n\n      // Применяем обновления\n      return prevElements.map(el => {\n        if (updatesMap[el.id]) {\n          return {\n            ...el,\n            ...updatesMap[el.id]\n          };\n        }\n        return el;\n      });\n    });\n  }, [elements, selectedElementIds]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"editor\",\n      children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n        addElement: addElement\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Canvas, {\n        ref: canvasRef,\n        elements: elements,\n        updateElement: updateElement,\n        updateMultipleElements: updateMultipleElements,\n        selectedElementIds: selectedElementIds,\n        setSelectedElementIds: setSelectedElementIds,\n        deleteElement: deleteElement\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PropertiesPanel, {\n        selectedElement: selectedElement,\n        selectedElementIds: selectedElementIds,\n        updateElementProps: updateElementProps,\n        updateElement: updateElement,\n        saveCanvas: saveCanvas,\n        clearCanvas: clearCanvas,\n        exportToHtmlCss: exportToHtmlCss,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo,\n        deleteSelectedElements: deleteSelectedElements,\n        alignElements: alignElements,\n        distributeElements: distributeElements\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AIColorPaletteGenerator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LayersPanel, {\n        elements: elements,\n        selectedElementIds: selectedElementIds,\n        setSelectedElementIds: setSelectedElementIds,\n        updateElement: updateElement,\n        updateElementProps: updateElementProps,\n        onMoveLayer: onMoveLayer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 367,\n    columnNumber: 5\n  }, this);\n}\n_s(Editor, \"4+MKRsef91kc9mBbqSzvh4ohQoQ=\");\n_c = Editor;\nexport default Editor;\nvar _c;\n$RefreshReg$(_c, \"Editor\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","Header","Sidebar","Canvas","PropertiesPanel","AIColorPaletteGenerator","LayersPanel","generateUniqueId","JSZip","saveAs","logo","generateHtmlCss","jsxDEV","_jsxDEV","MAX_HISTORY_SIZE","Editor","_s","elements","setElements","selectedElementIds","setSelectedElementIds","canvasRef","history","setHistory","historyIndex","setHistoryIndex","newHistory","slice","push","length","shift","savedElements","localStorage","getItem","loadedElements","JSON","parse","e","console","error","selectedElement","find","el","id","addElement","type","x","y","newElement","width","height","props","name","charAt","toUpperCase","content","fontSize","color","src","alt","label","bgColor","textColor","borderRadius","prevElements","updateElement","updates","map","updateMultipleElements","ids","updatesMap","includes","updateElementProps","newProps","deleteElement","filter","prevIds","prevId","deleteSelectedElements","window","confirm","saveCanvas","setItem","stringify","alert","clearCanvas","removeItem","exportToHtmlCss","htmlContent","cssContent","zip","file","generateAsync","then","catch","undo","newIndex","redo","onMoveLayer","fromIndex","toIndex","newElements","movedElement","splice","canUndo","canRedo","handleKeyDown","target","tagName","isCtrlOrCmd","metaKey","ctrlKey","key","shiftKey","preventDefault","toLowerCase","document","addEventListener","removeEventListener","alignElements","alignment","selected","minX","Infinity","minY","maxX","maxY","forEach","Math","min","max","boundingBoxWidth","boundingBoxHeight","boundingBoxCenterX","boundingBoxCenterY","newX","newY","distributeElements","axis","sort","a","b","firstElement","lastElement","startX","endX","totalWidth","totalElementsWidth","availableSpace","spacing","currentX","index","startY","endY","totalHeight","totalElementsHeight","currentY","children","fileName","_jsxFileName","lineNumber","columnNumber","className","ref","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/ProThemesRU1/frontend/src/components/Editor.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport Header from './Header';\r\nimport Sidebar from './Sidebar';\r\nimport Canvas from './Canvas';\r\nimport PropertiesPanel from './PropertiesPanel';\r\nimport AIColorPaletteGenerator from './AIColorPaletteGenerator';\r\nimport LayersPanel from './LayersPanel';\r\nimport { generateUniqueId } from '../utils/idGenerator';\r\nimport JSZip from 'jszip';\r\nimport { saveAs } from 'file-saver';\r\nimport logo from '../assets/logo.png';\r\nimport { generateHtmlCss } from '../utils/exportUtils';\r\n\r\nconst MAX_HISTORY_SIZE = 50;\r\n\r\nfunction Editor() {\r\n  const [elements, setElements] = useState([]);\r\n  const [selectedElementIds, setSelectedElementIds] = useState([]);\r\n  const canvasRef = useRef(null);\r\n\r\n  const [history, setHistory] = useState([[]]);\r\n  const [historyIndex, setHistoryIndex] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (history[historyIndex] === elements) {\r\n        return;\r\n    }\r\n\r\n    const newHistory = history.slice(0, historyIndex + 1);\r\n    newHistory.push(elements);\r\n\r\n    if (newHistory.length > MAX_HISTORY_SIZE) {\r\n        newHistory.shift();\r\n    }\r\n\r\n    setHistory(newHistory);\r\n    setHistoryIndex(newHistory.length - 1);\r\n  }, [elements, history, historyIndex]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const savedElements = localStorage.getItem('canvasElements');\r\n      if (savedElements) {\r\n        const loadedElements = JSON.parse(savedElements);\r\n        setElements(loadedElements);\r\n        setHistory([loadedElements]);\r\n        setHistoryIndex(0);\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Failed to load elements from localStorage\", e);\r\n    }\r\n  }, []);\r\n\r\n  const selectedElement = selectedElementIds.length > 0\r\n    ? elements.find(el => el.id === selectedElementIds[0])\r\n    : null;\r\n\r\n  const addElement = useCallback((type, x, y) => {\r\n    const newElement = {\r\n      id: generateUniqueId(),\r\n      type,\r\n      x,\r\n      y,\r\n      width: 150,\r\n      height: 50,\r\n      props: { name: `${type.charAt(0).toUpperCase() + type.slice(1)} ${elements.length + 1}` },\r\n    };\r\n    switch (type) {\r\n      case 'text':\r\n        newElement.props = { ...newElement.props, content: 'Новый текст', fontSize: '16px', color: '#000000' };\r\n        newElement.width = 200;\r\n        newElement.height = 40;\r\n        break;\r\n      case 'image':\r\n        newElement.props = { ...newElement.props, src: 'https://via.placeholder.com/150', alt: 'Изображение' };\r\n        newElement.width = 150;\r\n        newElement.height = 150;\r\n        break;\r\n      case 'button':\r\n        newElement.props = { ...newElement.props, label: 'Кнопка', bgColor: '#007bff', textColor: '#ffffff' };\r\n        newElement.width = 120;\r\n        newElement.height = 40;\r\n        break;\r\n      case 'shape':\r\n        newElement.props = { ...newElement.props, bgColor: '#ffc107', borderRadius: '0' };\r\n        newElement.width = 100;\r\n        newElement.height = 100;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    setElements(prevElements => [...prevElements, newElement]);\r\n    setSelectedElementIds([newElement.id]);\r\n  }, [elements.length]);\r\n\r\n  const updateElement = useCallback((id, updates) => {\r\n    setElements(prevElements =>\r\n      prevElements.map(el => (el.id === id ? { ...el, ...updates } : el))\r\n    );\r\n  }, []);\r\n\r\n  const updateMultipleElements = useCallback((ids, updatesMap) => {\r\n    setElements(prevElements =>\r\n      prevElements.map(el => {\r\n        if (ids.includes(el.id)) {\r\n          const updates = updatesMap[el.id];\r\n          return { ...el, ...updates };\r\n        }\r\n        return el;\r\n      })\r\n    );\r\n  }, []);\r\n\r\n  const updateElementProps = useCallback((id, newProps) => {\r\n    setElements(prevElements =>\r\n      prevElements.map(el => (el.id === id ? { ...el, props: { ...el.props, ...newProps } } : el))\r\n    );\r\n  }, []);\r\n\r\n  const deleteElement = useCallback((id) => {\r\n    setElements(prevElements => prevElements.filter(el => el.id !== id));\r\n    setSelectedElementIds(prevIds => prevIds.filter(prevId => prevId !== id));\r\n  }, []);\r\n\r\n  const deleteSelectedElements = useCallback(() => {\r\n    if (selectedElementIds.length > 0 && window.confirm(`Вы уверены, что хотите удалить выбранные элементы (${selectedElementIds.length})?`)) {\r\n      setElements(prevElements =>\r\n        prevElements.filter(el => !selectedElementIds.includes(el.id))\r\n      );\r\n      setSelectedElementIds([]);\r\n    }\r\n  }, [selectedElementIds]);\r\n\r\n  const saveCanvas = useCallback(() => {\r\n    try {\r\n      localStorage.setItem('canvasElements', JSON.stringify(elements));\r\n      alert('Проект сохранен!');\r\n    } catch (e) {\r\n      console.error(\"Failed to save elements to localStorage\", e);\r\n      alert('Ошибка при сохранении проекта!');\r\n    }\r\n  }, [elements]);\r\n\r\n  const clearCanvas = useCallback(() => {\r\n    if (window.confirm('Вы уверены, что хотите очистить канвас? Все несохраненные изменения будут потеряны!')) {\r\n      setElements([]);\r\n      setSelectedElementIds([]);\r\n      localStorage.removeItem('canvasElements');\r\n      alert('Канвас очищен!');\r\n    }\r\n  }, []);\r\n\r\n  const exportToHtmlCss = useCallback(() => {\r\n    const { htmlContent, cssContent } = generateHtmlCss(elements);\r\n    const zip = new JSZip();\r\n    zip.file(\"index.html\", htmlContent);\r\n    zip.file(\"style.css\", cssContent);\r\n    zip.generateAsync({ type: \"blob\" })\r\n      .then(function (content) {\r\n        saveAs(content, \"my_design.zip\");\r\n        alert('Дизайн экспортирован в ZIP-архив!');\r\n      })\r\n      .catch(e => {\r\n        console.error(\"Error exporting to ZIP:\", e);\r\n        alert('Ошибка при экспорте дизайна!');\r\n      });\r\n  }, [elements]);\r\n\r\n  const undo = useCallback(() => {\r\n    if (historyIndex > 0) {\r\n      const newIndex = historyIndex - 1;\r\n      setHistoryIndex(newIndex);\r\n      setElements(history[newIndex]);\r\n      setSelectedElementIds([]);\r\n    }\r\n  }, [history, historyIndex]);\r\n\r\n  const redo = useCallback(() => {\r\n    if (historyIndex < history.length - 1) {\r\n      const newIndex = historyIndex + 1;\r\n      setHistoryIndex(newIndex);\r\n      setElements(history[newIndex]);\r\n      setSelectedElementIds([]);\r\n    }\r\n  }, [history, historyIndex]);\r\n\r\n  const onMoveLayer = useCallback((fromIndex, toIndex) => {\r\n    setElements(prevElements => {\r\n      const newElements = [...prevElements];\r\n      const [movedElement] = newElements.splice(fromIndex, 1);\r\n      newElements.splice(toIndex, 0, movedElement);\r\n      return newElements;\r\n    });\r\n  }, []);\r\n\r\n  // --- Горячие клавиши ---\r\n  const canUndo = historyIndex > 0;\r\n  const canRedo = historyIndex < history.length - 1;\r\n\r\n  const handleKeyDown = useCallback((e) => {\r\n    // Не срабатывает, если фокус в input/textarea\r\n    if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {\r\n      return;\r\n    }\r\n    const isCtrlOrCmd = e.metaKey || e.ctrlKey;\r\n    // Undo: Ctrl+Z / Cmd+Z\r\n    if (isCtrlOrCmd && e.key === 'z' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      if (canUndo) undo();\r\n    }\r\n    // Redo: Ctrl+Shift+Z / Cmd+Shift+Z\r\n    else if (isCtrlOrCmd && e.key.toLowerCase() === 'z' && e.shiftKey) {\r\n      e.preventDefault();\r\n      if (canRedo) redo();\r\n    }\r\n    // Redo alternative: Ctrl+Y / Cmd+Y\r\n    else if (isCtrlOrCmd && e.key.toLowerCase() === 'y') {\r\n      e.preventDefault();\r\n      if (canRedo) redo();\r\n    }\r\n    // Delete/Backspace\r\n    else if (e.key === 'Delete' || e.key === 'Backspace') {\r\n      if (selectedElementIds.length > 0) {\r\n        e.preventDefault();\r\n        deleteSelectedElements();\r\n      }\r\n    }\r\n    // Save: Ctrl+S / Cmd+S\r\n    else if (isCtrlOrCmd && e.key.toLowerCase() === 's') {\r\n      e.preventDefault();\r\n      saveCanvas();\r\n    }\r\n  }, [canUndo, undo, canRedo, redo, selectedElementIds, deleteSelectedElements, saveCanvas]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [handleKeyDown]);\r\n\r\n  // НОВАЯ ФУНКЦИЯ: Выравнивание элементов\r\n  const alignElements = useCallback((alignment) => {\r\n    if (selectedElementIds.length < 2) return; // Для выравнивания нужно хотя бы 2 элемента\r\n\r\n    const selected = elements.filter(el => selectedElementIds.includes(el.id));\r\n\r\n    // Находим ограничивающую рамку для всех выбранных элементов\r\n    let minX = Infinity, minY = Infinity;\r\n    let maxX = -Infinity, maxY = -Infinity;\r\n\r\n    selected.forEach(el => {\r\n      minX = Math.min(minX, el.x);\r\n      minY = Math.min(minY, el.y);\r\n      maxX = Math.max(maxX, el.x + el.width);\r\n      maxY = Math.max(maxY, el.y + el.height);\r\n    });\r\n\r\n    const boundingBoxWidth = maxX - minX;\r\n    const boundingBoxHeight = maxY - minY;\r\n    const boundingBoxCenterX = minX + boundingBoxWidth / 2;\r\n    const boundingBoxCenterY = minY + boundingBoxHeight / 2;\r\n\r\n    setElements(prevElements => {\r\n      return prevElements.map(el => {\r\n        if (selectedElementIds.includes(el.id)) {\r\n          let newX = el.x;\r\n          let newY = el.y;\r\n\r\n          switch (alignment) {\r\n            case 'left':\r\n              newX = minX;\r\n              break;\r\n            case 'center-h':\r\n              newX = boundingBoxCenterX - el.width / 2;\r\n              break;\r\n            case 'right':\r\n              newX = maxX - el.width;\r\n              break;\r\n            case 'top':\r\n              newY = minY;\r\n              break;\r\n            case 'center-v':\r\n              newY = boundingBoxCenterY - el.height / 2;\r\n              break;\r\n            case 'bottom':\r\n              newY = maxY - el.height;\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n          return { ...el, x: newX, y: newY };\r\n        }\r\n        return el;\r\n      });\r\n    });\r\n  }, [elements, selectedElementIds]);\r\n\r\n  // НОВАЯ ФУНКЦИЯ: Распределение элементов\r\n  const distributeElements = useCallback((axis) => {\r\n    if (selectedElementIds.length < 3) return; // Для распределения нужно хотя бы 3 элемента\r\n\r\n    const selected = elements\r\n      .filter(el => selectedElementIds.includes(el.id))\r\n      .sort((a, b) => (axis === 'horizontal' ? a.x - b.x : a.y - b.y)); // Сортируем по оси\r\n\r\n    if (selected.length < 2) return; // На всякий случай, если после фильтрации осталось мало элементов\r\n\r\n    // Находим крайние точки для распределения\r\n    const firstElement = selected[0];\r\n    const lastElement = selected[selected.length - 1];\r\n\r\n    setElements(prevElements => {\r\n      const newElements = [...prevElements];\r\n      const updatesMap = {};\r\n\r\n      if (axis === 'horizontal') {\r\n        const startX = firstElement.x;\r\n        const endX = lastElement.x + lastElement.width;\r\n        const totalWidth = endX - startX;\r\n        let totalElementsWidth = 0;\r\n        selected.forEach(el => totalElementsWidth += el.width);        const availableSpace = totalWidth - totalElementsWidth;\r\n        const spacing = availableSpace / (selected.length - 1);\r\n\r\n        let currentX = startX;\r\n        selected.forEach((el, index) => {\r\n          if (index === 0) {\r\n            updatesMap[el.id] = { x: currentX };\r\n          } else {\r\n            currentX += selected[index - 1].width + spacing;\r\n            updatesMap[el.id] = { x: currentX };\r\n          }\r\n        });\r\n      } else { // vertical\r\n        const startY = firstElement.y;\r\n        const endY = lastElement.y + lastElement.height;\r\n        const totalHeight = endY - startY;\r\n        let totalElementsHeight = 0;\r\n        selected.forEach(el => totalElementsHeight += el.height);\r\n\r\n        const availableSpace = totalHeight - totalElementsHeight;\r\n        const spacing = availableSpace / (selected.length - 1);\r\n\r\n        let currentY = startY;\r\n        selected.forEach((el, index) => {\r\n          if (index === 0) {\r\n            updatesMap[el.id] = { y: currentY };\r\n          } else {\r\n            currentY += selected[index - 1].height + spacing;\r\n            updatesMap[el.id] = { y: currentY };\r\n          }\r\n        });\r\n      }\r\n\r\n      // Применяем обновления\r\n      return prevElements.map(el => {\r\n        if (updatesMap[el.id]) {\r\n          return { ...el, ...updatesMap[el.id] };\r\n        }\r\n        return el;\r\n      });\r\n    });\r\n  }, [elements, selectedElementIds]);\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n      <div className=\"editor\">\r\n        <Sidebar addElement={addElement} />\r\n        <Canvas\r\n          ref={canvasRef}\r\n          elements={elements}\r\n          updateElement={updateElement}\r\n          updateMultipleElements={updateMultipleElements}\r\n          selectedElementIds={selectedElementIds}\r\n          setSelectedElementIds={setSelectedElementIds}\r\n          deleteElement={deleteElement}\r\n        />\r\n        <PropertiesPanel\r\n          selectedElement={selectedElement}\r\n          selectedElementIds={selectedElementIds}\r\n          updateElementProps={updateElementProps}\r\n          updateElement={updateElement}\r\n          saveCanvas={saveCanvas}\r\n          clearCanvas={clearCanvas}\r\n          exportToHtmlCss={exportToHtmlCss}\r\n          undo={undo}\r\n          redo={redo}\r\n          canUndo={canUndo}\r\n          canRedo={canRedo}\r\n          deleteSelectedElements={deleteSelectedElements}\r\n          alignElements={alignElements}\r\n          distributeElements={distributeElements}\r\n        />\r\n        <AIColorPaletteGenerator />\r\n        <LayersPanel\r\n          elements={elements}\r\n          selectedElementIds={selectedElementIds}\r\n          setSelectedElementIds={setSelectedElementIds}\r\n          updateElement={updateElement}\r\n          updateElementProps={updateElementProps}\r\n          onMoveLayer={onMoveLayer}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Editor; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}